import React from 'react';
import { Route,NavLink } from 'react-router-dom';
import fetch from 'isomorphic-fetch';
import { Preview,PreviewHeader,PreviewItem,PreviewBody,PreviewFooter,PreviewButton } from 'react-weui';

class Location extends React.Component {
    constructor(props) {
        super(props);
        this.state = {
            location_id: this.props.match.params.location_id,
            // 预约服务地点
            location: [],
            // 预约服务时间
            // 直接选择
            //date: new Date(),
            // 预约时间段
            // 预约时间段内的人数
            //period:,
        }
    }

    componentDidMount() {
        const url = '/db/location?location_id=' + this.state.location_id;
        fetch(
            url,
            {
                method: 'get',
                headers: {
                    accept: 'application/json'
                }
            }
        ).then(res => res.json())
         .then(json => this.setState({ location: json.rows[0] }));
    }

    clickHander(url) {
        this.props.history.push(url);
    }

     render() {
         return (
             <div>
                 <div>
                     <Preview>
                         <PreviewHeader>
                             <PreviewItem label='采血点' value={`${this.state.location[1]}`} />
                         </PreviewHeader>
                         <PreviewBody>
                            <PreviewItem label='工作时间' value={`${this.state.location[2]}-${this.state.location[3]}`} />
                             {/* <PreviewItem label='工作时间' value={`${this.state.location[2]}`} /> */}
                             {/* <PreviewItem label='详细地址' value={`${this.state.location[10]}`} /> */}
                             <PreviewItem label='详细地址' value={`${this.state.location[4]}`} />
                         </PreviewBody>

                         <PreviewFooter>
                             <PreviewButton
                               onClick={this.clickHander.bind(this,`/location/navigate/${this.state.location_id}`)}
                               >
                               导航</PreviewButton>
                             <PreviewButton
                               onClick={this.clickHander.bind(this,`/volunteer/reservation/${this.state.location_id}`)} 
                               primary>预约</PreviewButton>
                         </PreviewFooter>
                     </Preview> 
                 </div>
             </div>
         )
     }
 }

export default Location;